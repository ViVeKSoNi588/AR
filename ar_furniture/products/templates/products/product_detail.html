{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ product.name }}</title>
  <!-- Include Model Viewer for AR -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
  <div class="wrapper">
    <!-- Header with Navigation -->
    <header>
        <nav class="navbar">
          <a href="{% url 'products:product_list' %}" class="logo">Furniture Store</a>
          <ul class="nav-links">
            <li><a href="{% url 'products:product_list' %}" class="active">Home</a></li>
            <li><a href="#">Shop</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Contact</a></li>
          </ul>
          <div class="menu-btn">&#9776;</div>
        </nav>
      </header>
      
      <script>
        // Toggle Mobile Menu
        document.querySelector(".menu-btn").addEventListener("click", function() {
          document.querySelector(".nav-links").classList.toggle("active");
        });
      </script>

    <!-- Main Content -->
    <main class="container content">
      <!-- Product Detail Section -->
      <section class="product-detail">
        <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-img">
        <div class="product-info">
          <h2>{{ product.name }}</h2>
          <p class="description">{{ product.description }}</p>
          <p class="price">Rs {{ product.price }}</p>
          <div class="btn1">
            <a href="{% url 'products:product_list' %}" class="btn">Buy</a>
          </div>
          

        </div>
      </section>

      <!-- AR Section -->
      <section class="ar-section">
        <h2>View in Augmented Reality</h2>
        <div class="ar-container">
            <!-- Product Variant Selector -->
            <label for="variant-selector">Choose a variant:</label>
            <select id="variant-selector">
                <option value="{{ product.model_3d.url }}">Default</option>
                <option value="{{ product.variant_1_model_3d.url }}">Variant 1</option>
                <option value="{{ product.variant_2_model_3d.url }}">Variant 2</option>
            </select>

            <!-- AR Usage Tips -->
            <div class="ar-tips">
                <p><strong>Tips for AR:</strong></p>
                <ul>
                    <li>Ensure good lighting for better AR tracking.</li>
                    <li>Move your device around to scan the surface.</li>
                    <li>Tap on the product to reposition it.</li>
                </ul>
            </div>

            <!-- Launch AR Viewer -->
            <model-viewer 
                id="ar-viewer"
                src="{{ product.model_3d.url }}"
                alt="A 3D model of {{ product.name }}"
                ar
                ar-modes="webxr scene-viewer quick-look"
                camera-controls
                auto-rotate>
            </model-viewer>
            <button id="launch-ar">Launch AR</button>
        </div>
        <script>
            const viewer = document.getElementById('ar-viewer');
            const selector = document.getElementById('variant-selector');
            const launchButton = document.getElementById('launch-ar');

            selector.addEventListener('change', (event) => {
                viewer.setAttribute('src', event.target.value);
            });

            launchButton.addEventListener('click', () => {
                viewer.activateAR();
            });
        </script>
      </section>

      <!-- Back Button -->
      <div class="back-btn">
        <a href="{% url 'products:product_list' %}" class="btn">Back to Products</a>
      </div>
    </main>

    <!-- Footer -->
    <footer>
      <div class="container">
        <p>&copy; 2025 Your Company Name. All rights reserved.</p>
      </div>
    </footer>
  </div>
</body>
</html>
